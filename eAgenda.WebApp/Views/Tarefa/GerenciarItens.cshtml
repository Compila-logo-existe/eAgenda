@model GerenciarItensViewModel

@{
	ViewBag.Titulo = "Gerenciar Itens da Tarefa";
}

<h2>@Model.Tarefa.Titulo</h2>
<form action="/tarefas/@Model.Tarefa.Id/adicionar-item" method="post">
	<div class="mb-3">
		<label class="form-label" asp-for="TituloItem"></label>
		<input class="form-control" id="inputTitulo" asp-for="TituloItem" type="text" placeholder="Título do Item">
		<span class="text-danger d-block mt-2" asp-validation-for="TituloItem"></span>
	</div>
	<button type="submit" class="btn btn-primary align-self-end col">
		Adicionar Item
	</button>
</form>

<h4 class="my-3">Itens da Tarefa:</h4>

@if (!Model.Tarefa.Itens.Any())
{
	<p class="fw-semibold mt-3">Ainda não há nenhum item para esta tarefa...</p>
}
else
{
	<div class="card rounded-4 border-0">
		<div class="card-body d-grid gap-2">
			@foreach (ItemTarefaViewModel item in Model.Tarefa.Itens)
			{
				<div class="chip chip-outline chip-input">
					<div class="chip-delete-right">
						<form action="/tarefas/@Model.Tarefa.Id/remover-item/@item.Id?contexto=GerenciarItens" method="post">
							<button type="submit" class="btn-icon-acao">
								<i class="bi bi-x"></i>
							</button>
						</form>
					</div>
					<div class="chip-text">
						@(item.Titulo.Length >= 31 ? item.Titulo.Substring(0, 30) + "..." : item.Titulo)
					</div>
				</div>
			}
		</div>
	</div>
}
<div class="form-group d-flex flex-column align-items-center justify-content-end gap-3 mt-5">
	<a href="/tarefas" class="btn btn-outline-primary rounded-3 px-2">Voltar</a>
</div>
@section Scripts {
	<partial name="_ValidationScriptsPartial">
}
